---
name: openclaw-self-evolve
description: Use this skill when the user wants OpenClaw to autonomously improve itself through iterative evaluation, mutation, and selection loops, including goal-setting, safety constraints, experiment tracking, and rollback.
---

# OpenClaw Self-Evolve

用于让 OpenClaw 以“可控、可回滚、可度量”的方式持续自我进化。

## 何时使用

当用户提出以下需求时启用：
- “让 OpenClaw 自己进化 / 自动优化”
- “让代理持续提升成功率、速度、稳定性”
- “建立自动实验与迭代机制”

## 在 OpenClaw 里怎么用

按下面 4 步就能真正跑起来：

1. **安装技能文件**
   - 把本目录放进 OpenClaw 的 skills 目录（常见是 `$CODEX_HOME/skills/openclaw-self-evolve/`）。
   - 确认最终路径包含：`openclaw-self-evolve/SKILL.md`。

2. **重启或刷新技能索引**
   - 让 OpenClaw 重新扫描 skills（重启进程或执行你环境中的 reload skills 动作）。
   - 目标是让 `name: openclaw-self-evolve` 被系统识别。

3. **用触发语句调用**
   - 在对话里直接说：
     - “让 OpenClaw 自己进化，目标优先成功率，风险等级保守。”
     - 或 “按 openclaw-self-evolve 跑一轮迭代，先建基线再给 3 个候选体。”

4. **检查输出是否符合模板**
   - 一次合格调用应返回：目标卡、假设、候选体、评测方案、晋级规则、回滚预案。
   - 若缺项，要求它“按 openclaw-self-evolve 的交付模板重答”。

### 最小可用启动口令（可直接复制）

```text
使用 openclaw-self-evolve：
请基于当前版本先建立 baseline，然后给我 1 轮 EVO 计划（最多 3 个候选变体，单变更类型），
并输出目标卡、A/B 评测方案、晋级规则和回滚预案。
默认目标：成功率优先；约束：P95 时延不升、成本不升；风险等级：保守。
```

## 核心原则

1. **先约束，后进化**：先定义不可突破的安全边界，再允许自动变更。
2. **小步快跑**：每次只改一个关键变量，避免多因素耦合。
3. **数据说话**：只依据统一指标和可复现实验做保留/淘汰。
4. **随时回滚**：任何迭代失败都可一键回到上一个稳定版本。

## 执行流程（EVO Loop）

### 1) 定义目标（Objective）
输出一份目标卡：
- North Star 指标（如任务成功率）
- 约束指标（如平均时延、token 成本、错误率）
- 最低可接受阈值（gate）
- 迭代周期（如每 50 个任务一次）

### 2) 建立基线（Baseline）
- 固定当前 OpenClaw 版本、提示词、工具链配置。
- 使用同一批评测任务运行至少 2 轮，记录均值与波动。
- 没有稳定基线时，不进入自动进化。

### 3) 生成候选变体（Mutate）
每轮最多创建 3 个候选体，变更类型仅选 1 类：
- 系统提示词结构（规划模板、反思模板、工具调用策略）
- 检索与记忆策略（top-k、重排阈值、摘要策略）
- 工具路由策略（何时调用哪类工具）

为每个候选体记录：
- `hypothesis`（为什么这次变更会更好）
- `change_scope`（只改了什么）
- `risk`（可能副作用）

### 4) 评估与选择（Evaluate & Select）
在同一评测集上运行 A/B：
- 先看 gate：是否触发安全/成本/时延红线
- 再看主指标：是否超过基线且达到最小提升幅度（建议 ≥2%）
- 若无显著提升，全部丢弃，继续下一轮变异

### 5) 部署与监控（Deploy）
- 灰度发布（建议 5% → 20% → 50% → 100%）
- 每个阶段都检查：成功率、P95 时延、成本、故障率
- 任一核心指标异常立刻回滚

### 6) 复盘沉淀（Reflect）
每轮必须生成 `evolution_log`：
- 保留了哪个变体、淘汰了哪些变体
- 成功/失败原因
- 下一轮唯一优先改进点

## 交付模板

当用户要求“开始自进化”时，直接按以下结构返回：

1. **目标卡**（指标 + 阈值 + 周期）
2. **本轮假设**（一句话）
3. **候选体列表**（最多 3 个）
4. **评测方案**（数据集、样本量、统计口径）
5. **晋级规则**（通过/淘汰条件）
6. **回滚预案**（触发条件 + 操作步骤）

## 安全护栏

默认启用以下护栏，除非用户明确关闭并承担风险：
- 禁止自动修改生产环境密钥/权限策略
- 禁止无审计地自我复制或外部扩散
- 禁止删除历史评测与日志
- 禁止绕过人工审批直接放量到 100%

## 快速响应指令（给 Codex/OpenClaw）

当收到“让 OpenClaw 自己进化”时，优先回复：

- 先给出 1 轮可执行进化计划（目标卡 + 3 个候选变体 + A/B 评估 + 回滚预案）
- 再询问用户只需补充的最小信息：
  1) 当前版本基线数据（若无则先建基线）
  2) 最高优先级目标（成功率/速度/成本）
  3) 可接受风险级别（保守/平衡/激进）

在缺失信息的情况下，采用**保守默认值**并继续推进，不阻塞流程。
